(function(m,a,u,d,o){"use strict";function h(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var r=h(m);const c=a.findByProps("h5"),p=a.findByDisplayName("FormDivider");class f extends r.Component{constructor(t){super(t),this.state={elapsedTime:0}}onChannelChange=t=>{t?.state=="RTC_CONNECTED"&&t?.context!="stream"&&this.setState({elapsedTime:0})};componentDidMount(){o.subscribe("RTC_CONNECTION_STATE",this.onChannelChange),this.timerUpdate=setInterval(()=>{this.setState(t=>({elapsedTime:t.elapsedTime+1}))},1e3)}componentWillUnmount(){o.unsubscribe("RTC_CONNECTION_STATE",this.onChannelChange),clearInterval(this.timerUpdate)}render(){return r.createElement("div",null,r.createElement(p,{style:{"margin-top":"6px","margin-bottom":"4px"}}),"Time elapsed: ",r.createElement("span",{className:`${c.h5} ${c.defaultColor}`},new Date(this.state.elapsedTime*1e3).toISOString().slice(11,19)))}}const s={},T=a.findByDisplayName("PanelSubtext",!1);let i=!1;var C=()=>({onLoad(){s.PanelSubtext=u.before("default",T,(e,t)=>{try{if(!e[0]?.className?.includes("channel-"))return e;const n=r.createElement(f,{id:"timer"});e[0].children=[e[0].children,n]}catch(n){console.error(n),!i&&d.showToast({title:"VC Timer",content:"An error has occured. Please check the console for more information.",duration:3e3}),i=!0}return t})},onUnload(){for(let e of Object.values(s))e()}});return C})(cumcord.modules.common.React,cumcord.modules.webpack,cumcord.patcher,cumcord.ui.toasts,cumcord.modules.common.FluxDispatcher);
