(()=>{var L=Object.create;var f=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty;var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),F=(t,e)=>{for(var n in e)f(t,n,{get:e[n],enumerable:!0})},y=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of B(e))!V.call(t,r)&&r!==n&&f(t,r,{get:()=>e[r],enumerable:!(s=O(e,r))||s.enumerable});return t};var l=(t,e,n)=>(n=t!=null?L(H(t)):{},y(e||!t||!t.__esModule?f(n,"default",{value:t,enumerable:!0}):n,t)),J=t=>y(f({},"__esModule",{value:!0}),t);var i=q((it,j)=>{j.exports=shelter.solidWeb});var rt={};F(rt,{onLoad:()=>nt,onUnload:()=>ot});var I=l(i()),N=l(i()),T=l(i()),P=l(i()),d=l(i()),D=l(i()),lt=l(i()),_=l(i());var A="._card_nwtbe_1{background-color:var(--background-primary);border-radius:4px;box-shadow:0 2px 10px 0 rgba(0,0,0,.2);display:flex;flex-direction:column;margin:10px 0;padding:10px;max-width:500px}._title_nwtbe_1{font-size:16px;font-weight:800}._description_nwtbe_1{font-size:14px;margin-top:5px}._author_nwtbe_1{font-size:12px;margin-top:5px}._buttons_nwtbe_1{display:flex;margin-top:10px}._button_nwtbe_1{background-color:var(--brand-experiment);border-radius:4px;border:none;color:var(--text-normal);cursor:pointer;font-size:12px;font-weight:600;margin-right:5px;padding:5px 10px}._button_nwtbe_1:hover{background-color:var(--brand-experiment-560);transition:background-color .2s ease}._buttonInstalled_nwtbe_1{background-color:var(--background-secondary);border-radius:4px;border:none;color:var(--text-normal);cursor:pointer;font-size:12px;font-weight:600;margin-right:5px;padding:5px 10px}",a={card:"_card_nwtbe_1",title:"_title_nwtbe_1",description:"_description_nwtbe_1",author:"_author_nwtbe_1",buttons:"_buttons_nwtbe_1",button:"_button_nwtbe_1",buttonInstalled:"_buttonInstalled_nwtbe_1"};var K=(0,I.template)('<div><div></div><div></div><div>By <b></b></div><div><button></button><a target="_blank"><button>View</button></a></div></div>',18),{flux:{dispatcher:G,stores:{SelectedChannelStore:Q}},observeDom:X,plugins:h,ui:{injectCss:Y,showToast:Z}}=shelter,p=[],tt=["https://yellowsink.github.io/shelter-plugins/","https://shelter.xirreal.dev","https://ioj4.github.io/shelter-plugins/","https://redstonekasi.github.io/shelter-plugins/","https://beefers.github.io/furniture/"];function et(t){let e=t.url.replace("https://","").replace("http://",""),n=()=>h.installedPlugins().hasOwnProperty(e);return(()=>{let s=K.cloneNode(!0),r=s.firstChild,u=r.nextSibling,c=u.nextSibling,R=c.firstChild,U=R.nextSibling,v=c.nextSibling,b=v.firstChild,g=b.nextSibling,W=g.firstChild;return(0,_.insert)(r,()=>t.json.name),(0,_.insert)(u,()=>t.json.description),(0,_.insert)(U,()=>t.json.author),b.$$click=async()=>{n()||(await h.addRemotePlugin(e,t.url),h.startPlugin(e),Z({title:t.json.name,content:"has been installed and started."}))},(0,_.insert)(b,()=>n()?"Installed":"Install"),(0,D.effect)(o=>{let m=a.card,x=a.title,$=a.description,w=a.author,E=a.buttons,S=n()?a.buttonInstalled:a.button,C=t.url,k=a.button;return m!==o._v$&&(0,d.className)(s,o._v$=m),x!==o._v$2&&(0,d.className)(r,o._v$2=x),$!==o._v$3&&(0,d.className)(u,o._v$3=$),w!==o._v$4&&(0,d.className)(c,o._v$4=w),E!==o._v$5&&(0,d.className)(v,o._v$5=E),S!==o._v$6&&(0,d.className)(b,o._v$6=S),C!==o._v$7&&(0,P.setAttribute)(g,"href",o._v$7=C),k!==o._v$8&&(0,d.className)(W,o._v$8=k),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),s})()}function z(t){if((t.type==="MESSAGE_CREATE"||t.type==="MESSAGE_UPDATE")&&t.message.channel_id!==Q.getChannelId())return;let e=X("[class*=messageContent-] [class^=anchor-]:not([data-instbtn])",async n=>{n.dataset.instbtn=1,e();let s=n.href.endsWith("/")?n.href:n.href+"/";if(s.endsWith("plugin.json/")&&(s=s.slice(0,-12)),!!tt.some(r=>s.startsWith(r)))try{let r=await fetch(s+"plugin.json");if(!r.ok)return;let u=await r.json(),c=(0,T.createComponent)(et,{get json(){return{name:u.name,description:u.description,author:u.author}},url:s});n.className="",n.style.all="unset",n.style.display="contents",n.replaceChildren(c)}catch(r){console.error(r)}});setTimeout(e,200)}var M=["MESSAGE_CREATE","MESSAGE_UPDATE","UPDATE_CHANNEL_DIMENSIONS"];function nt(){for(let t of M)G.subscribe(t,z);p.push(Y(A))}function ot(){for(let t of M)G.unsubscribe(t,z);for(let t of Object.values(p))t();p=[]}(0,N.delegateEvents)(["click"]);return J(rt);})();
