(function(N,I,r,c){"use strict";function p(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(a){if(a!=="default"){var h=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,h.get?h:{enumerable:!0,get:function(){return t[a]}})}}),e.default=t,Object.freeze(e)}var n=p(N),i=p(I),b=()=>cumcord.patcher.injectCSS('[aria-label$=hidden]>div path[d^=M2][d*="19"],[aria-label$=hidden]>div path[d^=M17][d*="19"]{fill:#ed4245!important}');const l=n.findByProps("h5"),o=n.findByProps("flex","directionColumn","alignCenter"),B=n.findByProps("chat","chatContent"),P=n.findByDisplayName("ChannelTextLimited"),g=n.findByDisplayName("ChannelTextNSFW"),f=n.findByDisplayName("HeaderBar"),_=n.findByDisplayName("ChannelTopic"),D=f.Icon,M=f.Title;var R=({channel:t,guild:e})=>c.React.createElement("div",{style:{width:"100%",background:"var(--background-primary)"}},c.React.createElement(f,{className:"fake-headerbar"},c.React.createElement(D,{icon:t.nsfw?g:P}),c.React.createElement(M,null,t.name),c.React.createElement(_,{channel:t,guild:e},"lmao")),c.React.createElement("div",{className:`hidden-notice ${B.content}`,style:{height:"100%"}},c.React.createElement("div",{className:`${o.flexCenter}`,style:{width:"100%"}},c.React.createElement("div",{className:`${o.flex} ${o.directionColumn} ${o.alignCenter}`},c.React.createElement("h2",{className:`${l.h2} ${l.defaultColor}`},"This is a hidden channel."),c.React.createElement("h5",{className:`${l.h5} ${l.defaultColor}`},"You cannot see the contents of this channel. However, you may see its name and topic.")))));const s={},y=n.findByProps("getMutableGuildChannels").getChannel,U=n.findByProps("getVoiceStateStats").getChannelId,O=n.findByProps("getGuild").getGuild,v=n.findByDisplayName("RouteWithImpression",!1),m=n.findByProps("getChannelPermissions"),C=n.findByProps("hasUnread"),G=n.findByProps("fetchMessages","sendMessage"),L=n.findByDisplayName("ChannelItem",!1),E=n.findByPrototypes("isManaged"),$=m.can.bind({}),d=t=>{if(typeof t!="object"&&!t?.id)try{t=y(t)}catch{}if(!t||[r.ChannelTypes.DM,r.ChannelTypes.GROUP_DM,r.ChannelTypes.GUILD_CATEGORY].includes(t.type))return!0;let e=[r.ChannelTypes.GUILD_TEXT,r.ChannelTypes.GUILD_VOICE,r.ChannelTypes.GUILD_STAGE_VOICE,r.ChannelTypes.GUILD_ANNOUNCEMENT,r.ChannelTypes.ANNOUNCEMENT_THREAD,r.ChannelTypes.PRIVATE_THREAD,r.ChannelTypes.PUBLIC_THREAD].includes(t.type),a=t.canBeSeen();return e&&a};var S=t=>({onLoad(){s.css=b(),s.Channel=()=>{delete E.prototype.isHidden},E.prototype.canBeSeen=function(){return $(r.Permissions.VIEW_CHANNEL,this)},s.can=i.after("can",m,(e,a)=>e[0]==r.Permissions.VIEW_CHANNEL?!0:a),s.Route=i.after("default",v,(e,a)=>{const h=a.props?.computedMatch?.params?.channelId,T=a.props?.computedMatch?.params?.guildId;let u;try{u=y(h)}catch{return a}return!d(u)&&T&&u?.id!=U()&&(a.props.render=()=>R({channel:u,guild:O(T)})),a}),s.channelItem=i.before("default",L,e=>(d(e[0].channel)||(e[0]["aria-label"]+=" hidden"),e)),s.hasUnread=i.before("hasUnread",C,e=>(d(e[0])||(e[0]=""),e)),s.hasUnreadPins=i.before("hasUnreadPins",C,e=>d(e[0])?e:["unread"]),s.fetchMessages=i.instead("fetchMessages",G,(e,a)=>{if(!!d(e[0].channelId))return a(...e)})},onUnload(){for(let e of Object.values(s))e()}});return S})(cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.constants,cumcord.modules.common);
