(function(P,y,i,_,N){"use strict";function m(n){if(n&&n.__esModule)return n;var e=Object.create(null);return n&&Object.keys(n).forEach(function(t){if(t!=="default"){var d=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,d.get?d:{enumerable:!0,get:function(){return n[t]}})}}),e.default=n,Object.freeze(e)}var a=m(P),c=m(y),r=m(N),g=()=>y.injectCSS('[aria-label$=hidden]>div path[d^=M2][d*="19"],[aria-label$=hidden]>div path[d^=M17][d*="19"]{fill:#ed4245!important}');const l=a.findByProps("h5"),u=a.findByProps("flex","directionColumn","alignCenter"),O=a.findByProps("chat","chatContent"),v=a.findByDisplayName("ChannelTextLimited"),D=a.findByDisplayName("ChannelTextNSFW"),h=a.findByDisplayName("HeaderBar"),M=a.findByDisplayName("ChannelTopic"),T=h.Icon,S=h.Title;var U=({channel:n,guild:e})=>r.createElement("div",{style:{width:"100%",background:"var(--background-primary)"}},r.createElement(h,{className:"fake-headerbar"},r.createElement(T,{icon:n.nsfw?D:v}),r.createElement(S,null,n.name),r.createElement(M,{channel:n,guild:e},"lmao")),r.createElement("div",{className:`hidden-notice ${O.content}`,style:{height:"100%"}},r.createElement("div",{className:`${u.flexCenter}`,style:{width:"100%"}},r.createElement("div",{className:`${u.flex} ${u.directionColumn} ${u.alignCenter}`},r.createElement("h2",{className:`${l.h2} ${l.defaultColor}`},"This is a hidden channel."),r.createElement("h5",{className:`${l.h5} ${l.defaultColor}`},"You cannot see the contents of this channel. However, you may see its name and topic.")))));const s={},C=a.findByProps("hasChannel").getChannel,j=a.findByProps("getVoiceStateStats").getChannelId,b=a.findByProps("getGuild").getGuild,w=a.findByDisplayName("RouteWithImpression",!1),I=a.findByProps("getChannelPermissions"),p=a.findByProps("hasUnread"),L=a.findByProps("fetchMessages","sendMessage"),$=a.findByDisplayName("ChannelItem",!1),E=a.findByPrototypes("isManaged"),G=I.can.bind({}),x=n=>n?.permissionOverwrites.length>0,R=n=>{if(n?.permissionOverwrites){const e=Object.values(b(n.guild_id)?.roles||{})?.filter(t=>t?.tags?.guild_connections===null);if(e&&e.length>0){for(const t of Object.keys(n.permissionOverwrites))if(e.find(d=>d.id===t))return!0}}return!1},o=n=>{if(typeof n!="object"&&!n?.id)try{n=C(n)}catch{n=null}return!n||[i.ChannelTypes.DM,i.ChannelTypes.GROUP_DM,i.ChannelTypes.GUILD_CATEGORY,i.ChannelTypes.GUILD_STORE,i.ChannelTypes.GUILD_STORE,i.ChannelTypes.GUILD_DIRECTORY].includes(n.type)||x(n)?!0:n.canBeSeen()};var H=n=>({onLoad(){s.css=g(),s.Channel=()=>{delete E.prototype.canBeSeen},E.prototype.canBeSeen=function(){return G(i.Permissions.VIEW_CHANNEL,this)},s.can=c.instead("can",I,(e,t)=>e[0]==i.Permissions.VIEW_CHANNEL&&!R(e[1])?!0:t(...e)),s.Route=c.after("default",w,(e,t)=>{const d=t.props?.computedMatch?.params?.channelId,B=t.props?.computedMatch?.params?.guildId;let f;try{f=C(d)}catch{return t}return!o(f)&&B&&f?.id!=j()&&(t.props.render=()=>U({channel:f,guild:b(B)})),t}),s.channelItem=c.before("default",$,e=>(o(e[0].channel)||(e[0]["aria-label"]+=" hidden"),e)),s.hasUnread=c.before("hasUnread",p,e=>(o(e[0])||(e[0]=""),e)),s.hasUnreadPins=c.before("hasUnreadPins",p,e=>o(e[0])?e:["unread"]),s.hasUnreadMentions=c.after("getMentionCount",p,(e,t)=>o(e[0])?t:0),s.fetchMessages=c.instead("fetchMessages",L,(e,t)=>{if(!o(e[0].channelId)){_.dispatch({type:"LOAD_MESSAGES_FAILURE",channelId:e[0].channelId});return}return t(...e)})},onUnload(){for(let e of Object.values(s))e()}});return H})(cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.constants,cumcord.modules.common.FluxDispatcher,cumcord.modules.common.React);
