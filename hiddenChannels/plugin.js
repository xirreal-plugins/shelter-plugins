(function(v,y,s,B,P){"use strict";function p(n){if(n&&n.__esModule)return n;var e=Object.create(null);return n&&Object.keys(n).forEach(function(t){if(t!=="default"){var d=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,d.get?d:{enumerable:!0,get:function(){return n[t]}})}}),e.default=n,Object.freeze(e)}var a=p(v),l=p(y),r=p(P),I=()=>y.injectCSS('[aria-label$=hidden]>div path[d^=M2][d*="19"],[aria-label$=hidden]>div path[d^=M17][d*="19"]{fill:#ed4245!important}');const o=a.findByProps("h5"),h=a.findByProps("flex","directionColumn","alignCenter"),N=a.findByProps("chat","chatContent"),_=a.findByDisplayName("ChannelTextLimited"),D=a.findByDisplayName("ChannelTextNSFW"),u=a.findByDisplayName("HeaderBar"),O=a.findByDisplayName("ChannelTopic"),M=u.Icon,T=u.Title;var $=({channel:n,guild:e})=>r.createElement("div",{style:{width:"100%",background:"var(--background-primary)"}},r.createElement(u,{className:"fake-headerbar"},r.createElement(M,{icon:n.nsfw?D:_}),r.createElement(T,null,n.name),r.createElement(O,{channel:n,guild:e},"lmao")),r.createElement("div",{className:`hidden-notice ${N.content}`,style:{height:"100%"}},r.createElement("div",{className:`${h.flexCenter}`,style:{width:"100%"}},r.createElement("div",{className:`${h.flex} ${h.directionColumn} ${h.alignCenter}`},r.createElement("h2",{className:`${o.h2} ${o.defaultColor}`},"This is a hidden channel."),r.createElement("h5",{className:`${o.h5} ${o.defaultColor}`},"You cannot see the contents of this channel. However, you may see its name and topic.")))));const i={},C=a.findByProps("hasChannel").getChannel,U=a.findByProps("getVoiceStateStats").getChannelId,S=a.findByProps("getGuild").getGuild,R=a.findByDisplayName("RouteWithImpression",!1),g=a.findByProps("getChannelPermissions"),f=a.findByProps("hasUnread"),j=a.findByProps("fetchMessages","sendMessage"),L=a.findByDisplayName("ChannelItem",!1),E=a.findByPrototypes("isManaged"),G=g.can.bind({}),c=n=>{if(typeof n!="object"&&!n?.id)try{n=C(n)}catch{n=null}return!n||[s.ChannelTypes.DM,s.ChannelTypes.GROUP_DM,s.ChannelTypes.GUILD_CATEGORY,s.ChannelTypes.GUILD_STORE,s.ChannelTypes.GUILD_STORE,s.ChannelTypes.GUILD_DIRECTORY].includes(n.type)||Object.values(n.permissionOverwrites).some(e=>e.type==1)?!0:n.canBeSeen()};var w=n=>({onLoad(){i.css=I(),i.Channel=()=>{delete E.prototype.isHidden},E.prototype.canBeSeen=function(){return G(s.Permissions.VIEW_CHANNEL,this)},i.can=l.after("can",g,(e,t)=>e[0]==s.Permissions.VIEW_CHANNEL&&!Object.values(e[1].permissionOverwrites||{}).some(d=>d.type==1)?!0:t),i.Route=l.after("default",R,(e,t)=>{const d=t.props?.computedMatch?.params?.channelId,b=t.props?.computedMatch?.params?.guildId;let m;try{m=C(d)}catch{return t}return!c(m)&&b&&m?.id!=U()&&(t.props.render=()=>$({channel:m,guild:S(b)})),t}),i.channelItem=l.before("default",L,e=>(c(e[0].channel)||(e[0]["aria-label"]+=" hidden"),e)),i.hasUnread=l.before("hasUnread",f,e=>(c(e[0])||(e[0]=""),e)),i.hasUnreadPins=l.before("hasUnreadPins",f,e=>c(e[0])?e:["unread"]),i.hasUnreadMentions=l.after("getMentionCount",f,(e,t)=>c(e[0])?t:0),i.fetchMessages=l.instead("fetchMessages",j,(e,t)=>{if(!c(e[0].channelId)){B.dispatch({type:s.ActionTypes.LOAD_MESSAGES_FAILURE,channelId:e[0].channelId});return}return t(...e)})},onUnload(){for(let e of Object.values(i))e()}});return w})(cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.constants,cumcord.modules.common.FluxDispatcher,cumcord.modules.common.React);
