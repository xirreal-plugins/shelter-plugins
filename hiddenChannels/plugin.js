(function(I,m,r,B){"use strict";function p(n){if(n&&n.__esModule)return n;var e=Object.create(null);return n&&Object.keys(n).forEach(function(a){if(a!=="default"){var h=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,h.get?h:{enumerable:!0,get:function(){return n[a]}})}}),e.default=n,Object.freeze(e)}var t=p(I),i=p(m),s=p(B),b=()=>m.injectCSS('[aria-label$=hidden]>div path[d^=M2][d*="19"],[aria-label$=hidden]>div path[d^=M17][d*="19"]{fill:#ed4245!important}');const l=t.findByProps("h5"),o=t.findByProps("flex","directionColumn","alignCenter"),P=t.findByProps("chat","chatContent"),_=t.findByDisplayName("ChannelTextLimited"),g=t.findByDisplayName("ChannelTextNSFW"),u=t.findByDisplayName("HeaderBar"),D=t.findByDisplayName("ChannelTopic"),M=u.Icon,U=u.Title;var v=({channel:n,guild:e})=>s.createElement("div",{style:{width:"100%",background:"var(--background-primary)"}},s.createElement(u,{className:"fake-headerbar"},s.createElement(M,{icon:n.nsfw?g:_}),s.createElement(U,null,n.name),s.createElement(D,{channel:n,guild:e},"lmao")),s.createElement("div",{className:`hidden-notice ${P.content}`,style:{height:"100%"}},s.createElement("div",{className:`${o.flexCenter}`,style:{width:"100%"}},s.createElement("div",{className:`${o.flex} ${o.directionColumn} ${o.alignCenter}`},s.createElement("h2",{className:`${l.h2} ${l.defaultColor}`},"This is a hidden channel."),s.createElement("h5",{className:`${l.h5} ${l.defaultColor}`},"You cannot see the contents of this channel. However, you may see its name and topic.")))));const c={},y=t.findByProps("hasChannel").getChannel,O=t.findByProps("getVoiceStateStats").getChannelId,G=t.findByProps("getGuild").getGuild,L=t.findByDisplayName("RouteWithImpression",!1),C=t.findByProps("getChannelPermissions"),E=t.findByProps("hasUnread"),$=t.findByProps("fetchMessages","sendMessage"),S=t.findByDisplayName("ChannelItem",!1),T=t.findByPrototypes("isManaged"),j=C.can.bind({}),d=n=>{if(typeof n!="object"&&!n?.id)try{n=y(n)}catch{}if(!n||[r.ChannelTypes.DM,r.ChannelTypes.GROUP_DM,r.ChannelTypes.GUILD_CATEGORY].includes(n.type))return!0;let e=[r.ChannelTypes.GUILD_TEXT,r.ChannelTypes.GUILD_VOICE,r.ChannelTypes.GUILD_STAGE_VOICE,r.ChannelTypes.GUILD_ANNOUNCEMENT,r.ChannelTypes.ANNOUNCEMENT_THREAD,r.ChannelTypes.PRIVATE_THREAD,r.ChannelTypes.PUBLIC_THREAD].includes(n.type),a=n.canBeSeen();return e&&a};var H=n=>({onLoad(){c.css=b(),c.Channel=()=>{delete T.prototype.isHidden},T.prototype.canBeSeen=function(){return j(r.Permissions.VIEW_CHANNEL,this)},c.can=i.after("can",C,(e,a)=>e[0]==r.Permissions.VIEW_CHANNEL?!0:a),c.Route=i.after("default",L,(e,a)=>{const h=a.props?.computedMatch?.params?.channelId,N=a.props?.computedMatch?.params?.guildId;let f;try{f=y(h)}catch{return a}return!d(f)&&N&&f?.id!=O()&&(a.props.render=()=>v({channel:f,guild:G(N)})),a}),c.channelItem=i.before("default",S,e=>(d(e[0].channel)||(e[0]["aria-label"]+=" hidden"),e)),c.hasUnread=i.before("hasUnread",E,e=>(d(e[0])||(e[0]=""),e)),c.hasUnreadPins=i.before("hasUnreadPins",E,e=>d(e[0])?e:["unread"]),c.fetchMessages=i.instead("fetchMessages",$,(e,a)=>{if(!!d(e[0].channelId))return a(...e)})},onUnload(){for(let e of Object.values(c))e()}});return H})(cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.constants,cumcord.modules.common.React);
