(function(B,y,l,P,I){"use strict";function p(n){if(n&&n.__esModule)return n;var e=Object.create(null);return n&&Object.keys(n).forEach(function(t){if(t!=="default"){var h=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,h.get?h:{enumerable:!0,get:function(){return n[t]}})}}),e.default=n,Object.freeze(e)}var a=p(B),d=p(y),r=p(I),N=()=>y.injectCSS('[aria-label$=hidden]>div path[d^=M2][d*="19"],[aria-label$=hidden]>div path[d^=M17][d*="19"]{fill:#ed4245!important}');const s=a.findByProps("h5"),o=a.findByProps("flex","directionColumn","alignCenter"),_=a.findByProps("chat","chatContent"),v=a.findByDisplayName("ChannelTextLimited"),D=a.findByDisplayName("ChannelTextNSFW"),u=a.findByDisplayName("HeaderBar"),M=a.findByDisplayName("ChannelTopic"),T=u.Icon,U=u.Title;var $=({channel:n,guild:e})=>r.createElement("div",{style:{width:"100%",background:"var(--background-primary)"}},r.createElement(u,{className:"fake-headerbar"},r.createElement(T,{icon:n.nsfw?D:v}),r.createElement(U,null,n.name),r.createElement(M,{channel:n,guild:e},"lmao")),r.createElement("div",{className:`hidden-notice ${_.content}`,style:{height:"100%"}},r.createElement("div",{className:`${o.flexCenter}`,style:{width:"100%"}},r.createElement("div",{className:`${o.flex} ${o.directionColumn} ${o.alignCenter}`},r.createElement("h2",{className:`${s.h2} ${s.defaultColor}`},"This is a hidden channel."),r.createElement("h5",{className:`${s.h5} ${s.defaultColor}`},"You cannot see the contents of this channel. However, you may see its name and topic.")))));const i={},C=a.findByProps("hasChannel").getChannel,O=a.findByProps("getVoiceStateStats").getChannelId,S=a.findByProps("getGuild").getGuild,R=a.findByDisplayName("RouteWithImpression",!1),g=a.findByProps("getChannelPermissions"),f=a.findByProps("hasUnread"),L=a.findByProps("fetchMessages","sendMessage"),G=a.findByDisplayName("ChannelItem",!1),E=a.findByPrototypes("isManaged"),j=g.can.bind({}),c=n=>{if(typeof n!="object"&&!n?.id)try{n=C(n)}catch{n=null}return!n||[l.ChannelTypes.DM,l.ChannelTypes.GROUP_DM,l.ChannelTypes.GUILD_CATEGORY,l.ChannelTypes.GUILD_STORE,l.ChannelTypes.GUILD_STORE,l.ChannelTypes.GUILD_DIRECTORY].includes(n.type)?!0:n.canBeSeen()};var x=n=>({onLoad(){i.css=N(),i.Channel=()=>{delete E.prototype.isHidden},E.prototype.canBeSeen=function(){return j(l.Permissions.VIEW_CHANNEL,this)},i.can=d.after("can",g,(e,t)=>e[0]==l.Permissions.VIEW_CHANNEL?!0:t),i.Route=d.after("default",R,(e,t)=>{const h=t.props?.computedMatch?.params?.channelId,b=t.props?.computedMatch?.params?.guildId;let m;try{m=C(h)}catch{return t}return!c(m)&&b&&m?.id!=O()&&(t.props.render=()=>$({channel:m,guild:S(b)})),t}),i.channelItem=d.before("default",G,e=>(c(e[0].channel)||(e[0]["aria-label"]+=" hidden"),e)),i.hasUnread=d.before("hasUnread",f,e=>(c(e[0])||(e[0]=""),e)),i.hasUnreadPins=d.before("hasUnreadPins",f,e=>c(e[0])?e:["unread"]),i.hasUnreadMentions=d.after("getMentionCount",f,(e,t)=>c(e[0])?t:0),i.fetchMessages=d.instead("fetchMessages",L,(e,t)=>{if(!c(e[0].channelId)){P.dispatch({type:l.ActionTypes.LOAD_MESSAGES_FAILURE,channelId:e[0].channelId});return}return t(...e)})},onUnload(){for(let e of Object.values(i))e()}});return x})(cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common.constants,cumcord.modules.common.FluxDispatcher,cumcord.modules.common.React);
